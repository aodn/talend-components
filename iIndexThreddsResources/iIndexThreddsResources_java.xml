<?xml version="1.0" encoding="UTF-8"?>
<COMPONENT> 
 <HEADER AUTHOR="jonescc" 
   COMPATIBILITY="ALL" 
   PLATEFORM="ALL" 
   RELEASE_DATE="20120718A" 
   SERIAL="" 
   STARTABLE="true" 
   STATUS="ALPHA" 
   VERSION="0.1"> 
   <SIGNATURE/> 
  </HEADER> 
 <FAMILIES> 
  <FAMILY>Harvesting</FAMILY>
 </FAMILIES> 
 <DOCUMENTATION> 
   <URL></URL> 
  </DOCUMENTATION> 
  <CONNECTORS> 
    <CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="0"/>
    <CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="0" MAX_INPUT="1"/>
    <CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
    <CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
    <CONNECTOR CTYPE="COMPONENT_OK"/>
    <CONNECTOR CTYPE="COMPONENT_ERROR"/>
    <CONNECTOR CTYPE="RUN_IF"/>
  </CONNECTORS> 
  <PARAMETERS> 
	<PARAMETER NAME="SCHEMA" FIELD="SCHEMA_TYPE" REQUIRED="true" NUM_ROW="1" SHOW="false">
		<TABLE READONLY="false">
	    	<COLUMN NAME="opendapUrl" TYPE="id_String" READONLY="false" LENGTH="255"/>
	    	<COLUMN NAME="modified" TYPE="id_Date" READONLY="false" PATTERN="&quot;yyyy-MM-dd'T'HH:mm:ss'000Z'&quot;"/>
	    	<COLUMN NAME="size" TYPE="id_Double" READONLY="false"/>
      	</TABLE>
	</PARAMETER>
    <PARAMETER NAME="PROPERTY" FIELD="PROPERTY_TYPE" NUM_ROW="1" REPOSITORY_VALUE="DATABASE:POSTGRESQL"/>
    <PARAMETER NAME="HOST" FIELD="TEXT" NUM_ROW="3" REPOSITORY_VALUE="SERVER_NAME" REQUIRED="true">
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="PORT" FIELD="TEXT" NUM_ROW="2" REPOSITORY_VALUE="PORT" REQUIRED="true">
      <DEFAULT>"5432"</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="DBNAME" FIELD="TEXT" NUM_ROW="3" REPOSITORY_VALUE="SID" REQUIRED="true">
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="SCHEMA_DB" FIELD="TEXT" NUM_ROW="3" REPOSITORY_VALUE="SCHEMA">
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="USER" FIELD="TEXT" NUM_ROW="4" REPOSITORY_VALUE="USERNAME" REQUIRED="true">
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="PASS" FIELD="TEXT" NUM_ROW="4" REPOSITORY_VALUE="PASSWORD" REQUIRED="true">
      <DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="JOBNAME" FIELD="TEXT" NUM_ROW="5" REQUIRED="true">
      <DEFAULT>"index"</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="CATALOG_URL" FIELD="TEXT" REQUIRED="true" NUM_ROW ="6" >
			<DEFAULT>"http://example.com/thredds/catalog.xml"</DEFAULT>
   </PARAMETER >
    <PARAMETER NAME="INCLUDE_DATASETS" FIELD="TEXT" REQUIRED="false" NUM_ROW="7">
    	<DEFAULT>""</DEFAULT>
    </PARAMETER>
    <PARAMETER NAME="EXCLUDE_DATASETS" FIELD="TEXT" REQUIRED="false" NUM_ROW ="8" >
			<DEFAULT>""</DEFAULT>
   </PARAMETER >
  </PARAMETERS> 
  <CODEGENERATION>
   <TEMPLATES INPUT="iThredds" OUTPUT="iIndexer">

      <TEMPLATE NAME="iThredds" COMPONENT="iThreddsIterator">
        <LINK_TO NAME="iIndexer" CTYPE="FLOW"/>
      </TEMPLATE>
      
      <TEMPLATE NAME="iIndexer" COMPONENT="iIndexResources"/>
      
      <TEMPLATE_PARAM SOURCE="self.SCHEMA"   TARGET="iThredds.SCHEMA" />
      <TEMPLATE_PARAM SOURCE="self.CATALOG_URL"   TARGET="iThredds.CATALOG_URL" />
      <TEMPLATE_PARAM SOURCE="self.EXCLUDE_DATASETS"   TARGET="iThredds.EXCLUDE_DATASETS" />
      <TEMPLATE_PARAM SOURCE="self.INCLUDE_DATASETS" TARGET="iThredds.INCLUDE_DATASETS" />
   	<TEMPLATE_PARAM SOURCE="self.SCHEMA"   TARGET="iIndexer.SCHEMA" />
      <TEMPLATE_PARAM SOURCE="self.HOST"   TARGET="iIndexer.HOST" />
      <TEMPLATE_PARAM SOURCE="self.PORT"   TARGET="iIndexer.PORT" />      
      <TEMPLATE_PARAM SOURCE="self.DBNAME" TARGET="iIndexer.DBNAME" />
      <TEMPLATE_PARAM SOURCE="self.SCHEMA_DB"   TARGET="iIndexer.SCHEMA_DB" />
      <TEMPLATE_PARAM SOURCE="self.USER"   TARGET="iIndexer.USER" />
      <TEMPLATE_PARAM SOURCE="self.JOBNAME"   TARGET="iIndexer.JOBNAME" />
      <TEMPLATE_PARAM SOURCE="self.PASS"   TARGET="iIndexer.PASS" />
      <TEMPLATE_PARAM VALUE="opendapUrl"   TARGET="iIndexer.URL_FIELD"/>
      <TEMPLATE_PARAM VALUE="modified"   TARGET="iIndexer.MODIFIED_FIELD" />
      <TEMPLATE_PARAM VALUE="size"   TARGET="iIndexer.SIZE_FIELD" />

    </TEMPLATES>
  </CODEGENERATION>
    <RETURNS> 
        <RETURN AVAILABILITY="AFTER" NAME="NB_LINE" TYPE="id_Integer"/> 
     </RETURNS> 
 </COMPONENT>
