<?xml version="1.0" encoding="UTF-8"?>
<COMPONENT> 
 <HEADER AUTHOR="jonescc" 
   COMPATIBILITY="ALL" 
   PLATEFORM="ALL" 
   RELEASE_DATE="20120718A" 
   SERIAL="" 
   STARTABLE="true" 
   STATUS="ALPHA" 
   VERSION="0.1"> 
   <SIGNATURE/> 
  </HEADER> 
 <FAMILIES> 
  <FAMILY>Harvesting</FAMILY>
 </FAMILIES> 
 <DOCUMENTATION> 
   <URL></URL> 
  </DOCUMENTATION> 
  <CONNECTORS> 
    <CONNECTOR CTYPE="FLOW" MAX_INPUT="0" MAX_OUTPUT="0"/>
    <CONNECTOR CTYPE="ITERATE" MAX_OUTPUT="0" MAX_INPUT="1"/>
    <CONNECTOR CTYPE="SUBJOB_OK" MAX_INPUT="1" />
    <CONNECTOR CTYPE="SUBJOB_ERROR" MAX_INPUT="1" />
    <CONNECTOR CTYPE="COMPONENT_OK"/>
    <CONNECTOR CTYPE="COMPONENT_ERROR"/>
    <CONNECTOR CTYPE="RUN_IF"/>
  </CONNECTORS> 
	<PARAMETERS>
		<PARAMETER NAME="SCHEMA" FIELD="SCHEMA_TYPE" REQUIRED="true" NUM_ROW="1" SHOW="false">
			<TABLE READONLY="false">
		    	<COLUMN NAME="filePath" TYPE="id_String" READONLY="false" LENGTH="255"/>
		    	<COLUMN NAME="fileLastModified" TYPE="id_Date" READONLY="false" PATTERN="&quot;yyyy-MM-dd'T'HH:mm:ss'000Z'&quot;"/>
	      	</TABLE>
		</PARAMETER>

	    <PARAMETER NAME="PROPERTY" FIELD="PROPERTY_TYPE" NUM_ROW="1" REPOSITORY_VALUE="DATABASE:POSTGRESQL"/>
	    <PARAMETER NAME="HOST" FIELD="TEXT" NUM_ROW="2" REPOSITORY_VALUE="SERVER_NAME" REQUIRED="true">
	      <DEFAULT>""</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="PORT" FIELD="TEXT" NUM_ROW="2" REPOSITORY_VALUE="PORT" REQUIRED="true">
	      <DEFAULT>"5432"</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="DBNAME" FIELD="TEXT" NUM_ROW="3" REPOSITORY_VALUE="SID" REQUIRED="true">
	      <DEFAULT>""</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="SCHEMA_DB" FIELD="TEXT" NUM_ROW="3" REPOSITORY_VALUE="SCHEMA">
	      <DEFAULT>""</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="USER" FIELD="TEXT" NUM_ROW="4" REPOSITORY_VALUE="USERNAME" REQUIRED="true">
	      <DEFAULT>""</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="PASS" FIELD="TEXT" NUM_ROW="4" REPOSITORY_VALUE="PASSWORD" REQUIRED="true">
	      <DEFAULT>""</DEFAULT>
	    </PARAMETER>
	    <PARAMETER NAME="JOBNAME" FIELD="TEXT" NUM_ROW="5" REQUIRED="true">
	      <DEFAULT>"index"</DEFAULT>
	    </PARAMETER>

		<PARAMETER NAME="LIST_MODE" FIELD="CLOSED_LIST" NUM_ROW="8">
			<ITEMS DEFAULT="FILES">
				<ITEM NAME="FILES" VALUE="FILES" />
				<ITEM NAME="DIRECTORIES" VALUE="DIRECTORIES" />
				<ITEM NAME="BOTH" VALUE="BOTH" />
			</ITEMS>
		</PARAMETER>

		<PARAMETER NAME="DIRECTORY" FIELD="DIRECTORY" NUM_ROW="8">
			<DEFAULT>"__COMP_DEFAULT_FILE_DIR__"</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="INCLUDSUBDIR" FIELD="CHECK" NUM_ROW="9">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>

		<PARAMETER NAME="CASE_SENSITIVE" FIELD="CLOSED_LIST" NUM_ROW="9">
			<ITEMS DEFAULT="YES">
				<ITEM NAME="YES" VALUE="YES" />
				<ITEM NAME="NO" VALUE="NO" />
			</ITEMS>
		</PARAMETER>
		
		<PARAMETER NAME="ERROR" FIELD="CHECK" NUM_ROW="9">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="GLOBEXPRESSIONS" FIELD="CHECK" NUM_ROW="10">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
			
	    <PARAMETER NAME="FILES" FIELD="TABLE" REQUIRED="false" NUM_ROW="11" NB_LINES="5">
          <ITEMS>
            <ITEM NAME="FILEMASK" />
          </ITEMS>
        </PARAMETER>
    
    </PARAMETERS>
	
		
	<ADVANCED_PARAMETERS>
		<PARAMETER NAME="IFEXCLUDE" FIELD="CHECK" NUM_ROW="1">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="EXCLUDEFILEMASK" FIELD="TEXT" NUM_ROW="3" SHOW_IF="IFEXCLUDE=='true'">
			<DEFAULT>"*.txt"</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="FORMAT_FILEPATH_TO_SLASH" FIELD="CHECK" NUM_ROW="4">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>		

        <!-- order by -->
        <PARAMETER NAME="ORDER_BY_NOTHING" FIELD="RADIO" NUM_ROW="11" GROUP="ORDER_BY">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="ORDER_BY_FILENAME" FIELD="RADIO" NUM_ROW="11" GROUP="ORDER_BY">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="ORDER_BY_FILESIZE" FIELD="RADIO" NUM_ROW="11" GROUP="ORDER_BY">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		
		<PARAMETER NAME="ORDER_BY_MODIFIEDDATE" FIELD="RADIO" NUM_ROW="11" GROUP="ORDER_BY">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>
		<!-- order action -->
		<PARAMETER NAME="ORDER_ACTION_ASC" FIELD="RADIO" NUM_ROW="21" GROUP="ORDER_ACTION">
			<DEFAULT>true</DEFAULT>
		</PARAMETER>
		<PARAMETER NAME="ORDER_ACTION_DESC" FIELD="RADIO" NUM_ROW="21" GROUP="ORDER_ACTION">
			<DEFAULT>false</DEFAULT>
		</PARAMETER>		
	</ADVANCED_PARAMETERS>
  <CODEGENERATION>
   <TEMPLATES INPUT="iFiles" OUTPUT="iIndexer">

      <TEMPLATE NAME="iFiles" COMPONENT="iFileList">
        <LINK_TO NAME="iIndexer" CTYPE="FLOW"/>
      </TEMPLATE>
      
      <TEMPLATE NAME="iIndexer" COMPONENT="iIndexResources"/>
      
      <TEMPLATE_PARAM SOURCE="self.SCHEMA"   TARGET="iFiles.SCHEMA" />
      <TEMPLATE_PARAM SOURCE="self.DIRECTORY"   TARGET="iFiles.DIRECTORY" />
      <TEMPLATE_PARAM SOURCE="self.LIST_MODE"   TARGET="iFiles.LIST_MODE" />
      <TEMPLATE_PARAM SOURCE="self.INCLUDSUBDIR"   TARGET="iFiles.INCLUDSUBDIR" />
      <TEMPLATE_PARAM SOURCE="self.CASE_SENSITIVE"   TARGET="iFiles.CASE_SENSITIVE" />
      <TEMPLATE_PARAM SOURCE="self.ERROR"   TARGET="iFiles.ERROR" />
      <TEMPLATE_PARAM SOURCE="self.GLOBEXPRESSIONS"   TARGET="iFiles.GLOBEXPRESSIONS" />
      <TEMPLATE_PARAM SOURCE="self.FILES"   TARGET="iFiles.FILES" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_BY_NOTHING"   TARGET="iFiles.ORDER_BY_NOTHING" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_BY_FILENAME"   TARGET="iFiles.ORDER_BY_FILENAME" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_BY_FILESIZE"   TARGET="iFiles.ORDER_BY_FILESIZE" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_BY_MODIFIEDDATE"   TARGET="iFiles.ORDER_BY_MODIFIEDDATE" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_ACTION_ASC"   TARGET="iFiles.ORDER_ACTION_ASC" />
      <TEMPLATE_PARAM SOURCE="self.ORDER_ACTION_DESC"   TARGET="iFiles.ORDER_ACTION_DESC" />
      <TEMPLATE_PARAM SOURCE="self.IFEXCLUDE"   TARGET="iFiles.IFEXCLUDE" />
      <TEMPLATE_PARAM SOURCE="self.EXCLUDEFILEMASK"   TARGET="iFiles.EXCLUDEFILEMASK" />
      <TEMPLATE_PARAM SOURCE="self.FORMAT_FILEPATH_TO_SLASH"   TARGET="iFiles.FORMAT_FILEPATH_TO_SLASH" />
      <TEMPLATE_PARAM SOURCE="self.SCHEMA"   TARGET="iIndexer.SCHEMA" />
      <TEMPLATE_PARAM SOURCE="self.HOST"   TARGET="iIndexer.HOST" />
      <TEMPLATE_PARAM SOURCE="self.PORT"   TARGET="iIndexer.PORT"   />      
      <TEMPLATE_PARAM SOURCE="self.DBNAME" TARGET="iIndexer.DBNAME" />
      <TEMPLATE_PARAM SOURCE="self.SCHEMA_DB"   TARGET="iIndexer.SCHEMA_DB" />
      <TEMPLATE_PARAM SOURCE="self.USER"   TARGET="iIndexer.USER" />
      <TEMPLATE_PARAM SOURCE="self.JOBNAME"   TARGET="iIndexer.JOBNAME" />
      <TEMPLATE_PARAM SOURCE="self.PASS"   TARGET="iIndexer.PASS" />
      <TEMPLATE_PARAM VALUE="filePath"   TARGET="iIndexer.URL_FIELD"/>
      <TEMPLATE_PARAM VALUE="fileLastModified"   TARGET="iIndexer.MODIFIED_FIELD" />

    </TEMPLATES>
  </CODEGENERATION>
    <RETURNS> 
        <RETURN AVAILABILITY="AFTER" NAME="NB_LINE" TYPE="id_Integer"/> 
     </RETURNS> 
 </COMPONENT>
